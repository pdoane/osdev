// ------------------------------------------------------------------------------------------------
// gfx/vga.c
// ------------------------------------------------------------------------------------------------

#include "gfx/vga.h"
#include "cpu/io.h"
#include "mem/lowmem.h"

// ------------------------------------------------------------------------------------------------
void vga_text_init()
{
    vga_text_clear();
    vga_text_setcursor(0);
}

// ------------------------------------------------------------------------------------------------
void vga_text_clear()
{
    volatile u64* p = (volatile u64*)VGA_TEXT_BASE;
    volatile u64* end = p + 500;

    for (; p != end; ++p)
    {
        *p = 0x1f201f201f201f20;
    }
}

// ------------------------------------------------------------------------------------------------
void vga_text_setcursor(uint offset)
{
    out8(0x3d4, 0x0e);
    out8(0x3d5, offset >> 8);
    out8(0x3d4, 0x0f);
    out8(0x3d5, offset);
}

